(this["webpackJsonpts-react-todo"]=this["webpackJsonpts-react-todo"]||[]).push([[0],{19:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),s=n(20),r=n.n(s),i=n(8),o=n.n(i),u=n(10),d=n(13),l=n(4),j=n(16),b=n(12),m=n(21),p=(n(37),m.a.initializeApp({apiKey:"AIzaSyBy9E20bP8J3cUPJ3ToqcLZxc289z6Bn6U",authDomain:"todolist-7e8ab.firebaseapp.com",databaseURL:"https://todolist-7e8ab-default-rtdb.firebaseio.com",projectId:"todolist-7e8ab",storageBucket:"todolist-7e8ab.appspot.com",messagingSenderId:"794149330635",appId:"1:794149330635:web:d6002c6580484a0de0054e",measurementId:"G-7PG110CMEN"}).firestore().collection("tasks")),f={get:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("oryginal "),e.abrupt("return",new Promise((function(e,t){p.get().then((function(t){var n=t.docs.map((function(e){var t=e.data();return Object(b.a)({},t)}));e(n)})).catch((function(e){return t(!1)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),put:function(e){return new Promise((function(t,n){p.doc(e.id.toString()).set(e).then((function(){t(!0)})).catch((function(e){n(!1)}))}))},updateByKeyName:function(e,t,n){return new Promise((function(a,c){p.doc(e.toString()).update(Object(j.a)({},t,n)).then((function(e){a(!0)})).catch((function(e){c(!1)}))}))},delete:function(e){return new Promise((function(t,n){p.doc(e.toString()).delete().then((function(){t(!0)})).catch((function(e){n(!1)}))}))}},O=function(e){return e.split("T").join(" ")},h=function(){var e=new Date,t=function(e){return e<10?"0"+e:e},n=t(e.getDate()),a=t(e.getMonth()+1),c=e.getFullYear(),s=e.getHours(),r=t(e.getMinutes());return c+"-"+a+"-"+n+"T"+t(s)+":"+r},x=function(e){for(var t=0,n=Object(d.a)(e),a=!1,c=function(){var e=Math.round(1e4*Math.random());0===n.filter((function(t){return t.id===e})).length&&(a=!0,t=e)};!a;)c();return t},k=function(e){return e?e.sort((function(e,t){return e.taskTime>=t.taskTime?1:-1})):[]},v=function(){var e=new Date;return{day:e.getDate(),month:["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],dayName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]}}(),N={id:0,taskName:"",taskTime:"",taskDesc:""},g=n(1),y=function(e){var t=e.taskName,n=e.taskTime,a=e.change,s=e.add,r=e.taskDesc,i=e.validation,o=e.showInvalid;return Object(g.jsx)(c.a.Fragment,{children:Object(g.jsxs)("div",{className:"inputContainer",children:[Object(g.jsxs)("div",{className:"singleInputContainer",children:[Object(g.jsx)("input",{type:"text",id:"taskName",name:"taskName",onChange:a,value:t}),Object(g.jsxs)("label",{htmlFor:"taskName",className:0!==t.length?"notEmpty":"",children:["Name ",function(e){if(o)return!i[e]&&Object(g.jsx)("span",{className:"red",children:" ( required! )"})}("taskName")]})]}),Object(g.jsxs)("div",{className:"singleInputContainer",children:[Object(g.jsx)("input",{type:"text",id:"taskDesc",name:"taskDesc",onChange:a,value:r}),Object(g.jsx)("label",{htmlFor:"taskDesc",className:0!==r.length?"notEmpty":"",children:"Description"})]}),Object(g.jsxs)("div",{className:"singleInputContainer",children:[Object(g.jsx)("input",{type:"datetime-local",id:"taskTime",name:"taskTime",onChange:a,value:n}),Object(g.jsx)("label",{htmlFor:"date",className:"notEmpty",children:"Date"})]}),Object(g.jsx)("div",{className:"centerWrapper",children:Object(g.jsx)("button",{className:"successBtn",onClick:s,children:"Add"})})]})})},T=(n(19),function(e){var t=e.children,n=e.title,a=e.show,s=e.close,r=e.confirmationType;return Object(g.jsxs)(c.a.Fragment,{children:[Object(g.jsx)("div",{"data-testid":"modal-backdrop",className:["backdrop",a&&"backdropShow"].join(" "),onClick:s}),Object(g.jsx)("div",{"data-testid":"modal-wrapper",className:["modalWrapper",r&&"modalConf"].join(" "),children:Object(g.jsxs)("div",{"data-testid":"modal-box",className:a?"modalBox modalShow":"modalBox",children:[Object(g.jsxs)("div",{className:"modalTitle",children:[Object(g.jsx)("h3",{children:n}),Object(g.jsx)("div",{"data-testid":"modal-close",className:"modalClose",onClick:s})]}),Object(g.jsx)("div",{className:"modalContent",children:t})]})})]})}),w=(n(29),function(){return Object(g.jsxs)("div",{className:"lds-ring","data-testid":"spinner",children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{})]})}),C=(n(30),function(e){var t=e.children;return Object(g.jsx)("div",{className:"backdrop backdropShow onTop",children:t})}),S=(n(31),function(e){var t=e.addTask,n=e.loading,s=Object(a.useState)(""),r=Object(l.a)(s,2),i=r[0],o=r[1],u=Object(a.useState)(h()),d=Object(l.a)(u,2),j=d[0],b=d[1],m=Object(a.useState)(""),p=Object(l.a)(m,2),f=p[0],O=p[1],x=Object(a.useState)(!1),k=Object(l.a)(x,2),v=k[0],N=k[1],S=Object(a.useState)({taskName:!1}),D=Object(l.a)(S,2),I=D[0],B=D[1],E=Object(a.useState)(!1),F=Object(l.a)(E,2),M=F[0],U=F[1],W=Object(a.useState)(!0),A=Object(l.a)(W,2),J=A[0],P=A[1],R=function(){N(!1),V(),P(!0)},V=function(){o(""),O(""),B({taskName:!1}),U(!1),b(h())};return Object(a.useEffect)((function(){J||n||R()})),Object(g.jsxs)(c.a.Fragment,{children:[n&&Object(g.jsx)(C,{children:Object(g.jsx)(w,{})}),Object(g.jsx)("div",{"data-testid":"addBtn",className:"addBtn",onClick:function(){N(!0)}}),Object(g.jsx)(T,{confirmationType:!1,show:v,title:"Add your new task",close:R,children:v&&Object(g.jsx)(y,{change:function(e){var t=e.target.value,n=e.target.name;console.log(t),"taskDesc"===n&&O(t),"taskTime"===n&&b(t),"taskName"===n&&(console.log(t),o(t),t.length>0?B({taskName:!0}):(B({taskName:!1}),U(!0)))},add:function(){if(0!==i.trim().length&&0!==j.trim().length)return P(!1),t({id:0,taskName:i,taskTime:j,taskDesc:f});U(!0)},taskName:i,taskTime:j,taskDesc:f,validation:I,showInvalid:M})})]})}),D=(n(32),function(e){var t=e.inputValue,n=e.onEdit,c=e.typeOfInput,s=Object(a.useState)(!1),r=Object(l.a)(s,2),i=r[0],o=r[1],u=Object(a.useState)(t),d=Object(l.a)(u,2),j=d[0],m=d[1],p=function(e){var t=Object(a.useRef)("");return Object(a.useEffect)((function(){t.current=e})),t.current}(j),f=Object(a.useRef)(null),h=Object(a.useRef)(null);Object(a.useEffect)((function(){f.current&&f.current.focus(),h.current&&h.current.focus()}),[i]);var x=function(){o((function(e){return!e})),i&&p!==j&&n(j)},k={style:i?{display:"block"}:{display:"none"},value:"Description:"===j?"":j,onChange:function(e){m(e.target.value)},onBlur:function(){x()}};return Object(g.jsxs)("div",{className:"editInputContainer","data-testid":"input-container",children:[i?"textarea"===c?Object(g.jsx)("textarea",Object(b.a)(Object(b.a)({},k),{},{ref:h})):Object(g.jsx)("input",Object(b.a)({"aria-label":"input",type:"time"===c?"datetime-local":"text",ref:f},k)):Object(g.jsx)("p",{children:"time"===c?O(j):j}),Object(g.jsx)("div",{className:"editInputBtnContainer",onClick:x,"data-testid":"edit",children:!i&&Object(g.jsx)("span",{className:"red",children:"EDIT"})})]})}),I=function(e){var t=e.title,n=e.show,a=e.close,c=e.remove,s=e.confirmationType;return Object(g.jsx)(T,{confirmationType:s,show:n,title:t,close:a,children:n&&Object(g.jsxs)("div",{className:"centerWrapper",children:[Object(g.jsx)("button",{className:"dangerBtn",onClick:a,children:"No"}),Object(g.jsx)("button",{className:"successBtn",onClick:c,children:"Yes"})]})})},B=function(e){var t=e.task,n=e.removeTask,c=e.show,s=e.editTask,r=e.close,i=e.loading,o=Object(a.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=function(){j(!1)},m=function(e){return function(n){return s(n,t.id,e)}},p=Object(g.jsx)(D,{edit:!0,inputValue:t.taskName,onEdit:m("taskName")});return Object(g.jsxs)("div",{children:[i&&Object(g.jsx)(C,{children:Object(g.jsx)(w,{})}),Object(g.jsxs)(T,{"data-testid":"main-modal",confirmationType:!1,show:c,title:c?p:"",close:function(){return d?(j(!1),null):r()},children:[c&&Object(g.jsxs)("div",{"data-testid":"main-modal-inputs",children:[Object(g.jsx)(D,{typeOfInput:"time",edit:!0,inputValue:t.taskTime.toString(),onEdit:m("taskTime")}),Object(g.jsx)(D,{typeOfInput:"textarea",edit:!0,inputValue:t.taskDesc?t.taskDesc:"Description:",onEdit:m("taskDesc")}),Object(g.jsx)("div",{className:"centerWrapper",children:Object(g.jsx)("button",{className:"successBtn",onClick:function(){j(!0)},children:"Complete"})})]}),Object(g.jsx)(I,{confirmationType:!0,show:d,title:"Confim complete task?",close:b,remove:function(){n(t.id),b()}})]})]})},E=(n(33),function(e){var t=e.name,n=e.time,a=e.click;return Object(g.jsxs)("div",{className:"Task",onClick:a,"data-testid":"task",children:[Object(g.jsx)("div",{className:"Task-name",children:t}),Object(g.jsx)("div",{children:n?O(n):null})]})}),F=function(e){var t=e.tasks,n=e.taskClick,a=null;return a=e.loading?Object(g.jsx)(C,{children:Object(g.jsx)(w,{})}):0!==t.length?t.map((function(e){var t=e.id,a=e.taskName,c=e.taskTime;return Object(g.jsx)(E,{name:a,time:c,click:function(){return n(t)}},t)})):"Empty task list.",Object(g.jsx)("div",{className:"mainWrapper",children:Object(g.jsx)("div",{"data-testid":"tasks-list",className:"todoList",children:a})})},M=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(N),i=Object(l.a)(r,2),j=i[0],b=i[1],m=Object(a.useState)(!1),p=Object(l.a)(m,2),O=p[0],h=p[1],v=Object(a.useState)(!0),y=Object(l.a)(v,2),T=y[0],w=y[1],C=Object(a.useState)(!1),D=Object(l.a)(C,2),I=D[0],E=D[1],M=Object(a.useState)(!1),U=Object(l.a)(M,2),W=U[0],A=U[1],J=function(){h(!1)},P=function(){var e=Object(u.a)(o.a.mark((function e(t,a,c){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.a)(n),i=r.findIndex((function(e){return e.id===a})),r[i][c]="taskName"===c?t.toUpperCase():t,e.prev=3,E(!0),e.next=7,f.updateByKeyName(a,c,t);case 7:e.sent&&(E(!1),s(k(r))),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),E(!1),alert("Unable to update task.");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,c,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.taskName,c=t.taskDesc,r=t.taskTime,a=a.toUpperCase(),i={id:x(n),taskName:a,taskTime:r,taskDesc:c},e.prev=3,A(!0),e.next=7,f.put(i);case 7:e.sent&&(A(!1),s((function(e){return k([].concat(Object(d.a)(e),[i]))}))),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),A(!1),alert("Unable to add new task to database.");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,f.delete(t);case 4:e.sent&&(s((function(e){return e.filter((function(e){return e.id!==t}))})),J(),E(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Unable complete task.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get();case 3:(t=e.sent)&&(s(k(t)),w(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Unable to get tasks.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(g.jsxs)(c.a.Fragment,{children:[Object(g.jsx)(S,{addTask:R,loading:W}),Object(g.jsx)(B,{task:j,show:O,close:J,removeTask:V,editTask:P,loading:I}),Object(g.jsx)(F,{tasks:n,taskClick:function(e){var t=Object(d.a)(n).filter((function(t){return t.id===e}));b(t[0]),h(!0)},loading:T})]})},U=(n(34),n(35),function(){return Object(g.jsx)("div",{className:"header",children:Object(g.jsx)("div",{className:"mainWrapper",children:Object(g.jsx)("div",{className:"headerWrapper",children:Object(g.jsxs)("div",{className:"dateDisplay",children:[v.dayName,",",Object(g.jsxs)("span",{className:"rest",children:[v.day," ",v.month]})]})})})})}),W=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(U,{}),Object(g.jsx)("div",{className:"container",children:Object(g.jsx)(M,{})})]})};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7b000870.chunk.js.map